(function (window) {
	window.htmlentities = {
		/**
		 * Converts a string to its html characters completely.
		 *
		 * @param {String} str String with unescaped HTML characters
		 **/
		encode: function (str) {
			var buf = [];

			for (var i = str.length - 1; i >= 0; i--) {
				buf.unshift(['&#', str[i].charCodeAt(), ';'].join(''));
			}

			return buf.join('');
		},
		/**
		 * Converts an html characterSet into its original character.
		 *
		 * @param {String} str htmlSet entities
		 **/
		decode: function (str) {
			try {
				return str.replace(/&#(\d+);/g, function (match, dec) {
					return String.fromCharCode(dec);
				});
			} catch (e) {
				let errorMsg = e.message;
				return false;
            }
		}
	};
})(window);

// Usage: 
//	htmlentities.encode("Hello, this is a test stríng > < with characters that could break html. Therefore we convert it to its html characters.");
//		Output: "&#72;&#101;&#108;&#108;&#111;&#44;&#32;&#116;&#104;&#105;&#115;&#32;&#105;&#115;&#32;&#97;&#32;&#116;&#101;&#115;&#116;&#32;&#115;&#116;&#114;&#237;&#110;&#103;&#32;&#62;&#32;&#60;&#32;&#119;&#105;&#116;&#104;&#32;&#99;&#104;&#97;&#114;&#97;&#99;&#116;&#101;&#114;&#115;&#32;&#116;&#104;&#97;&#116;&#32;&#99;&#111;&#117;&#108;&#100;&#32;&#98;&#114;&#101;&#97;&#107;&#32;&#104;&#116;&#109;&#108;&#46;&#32;&#84;&#104;&#101;&#114;&#101;&#102;&#111;&#114;&#101;&#32;&#119;&#101;&#32;&#99;&#111;&#110;&#118;&#101;&#114;&#116;&#32;&#105;&#116;&#32;&#116;&#111;&#32;&#105;&#116;&#115;&#32;&#104;&#116;&#109;&#108;&#32;&#99;&#104;&#97;&#114;&#97;&#99;&#116;&#101;&#114;&#115;&#46;"
//	htmlentities.decode("&#72;&#101;&#108;&#108;&#111;&#44;&#32;&#116;&#104;&#105;&#115;&#32;&#105;&#115;&#32;&#97;&#32;&#116;&#101;&#115;&#116;&#32;&#115;&#116;&#114;&#237;&#110;&#103;&#32;&#62;&#32;&#60;&#32;&#119;&#105;&#116;&#104;&#32;&#99;&#104;&#97;&#114;&#97;&#99;&#116;&#101;&#114;&#115;&#32;&#116;&#104;&#97;&#116;&#32;&#99;&#111;&#117;&#108;&#100;&#32;&#98;&#114;&#101;&#97;&#107;&#32;&#104;&#116;&#109;&#108;&#46;&#32;&#84;&#104;&#101;&#114;&#101;&#102;&#111;&#114;&#101;&#32;&#119;&#101;&#32;&#99;&#111;&#110;&#118;&#101;&#114;&#116;&#32;&#105;&#116;&#32;&#116;&#111;&#32;&#105;&#116;&#115;&#32;&#104;&#116;&#109;&#108;&#32;&#99;&#104;&#97;&#114;&#97;&#99;&#116;&#101;&#114;&#115;&#46;");
//		Output: "Hello, this is a test stríng > < with characters that could break html. Therefore we convert it to its html characters."